<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Live Mock Interview | InterviewPrep AI</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    body {
      background: #f5f8ff;
      min-height: 100vh;
    }
    .card {
      border: none;
      border-radius: 1rem;
      box-shadow: 0 20px 40px rgba(15, 23, 42, 0.08);
    }
    .question-card {
      background: #fff;
      border-radius: 1.2rem;
      padding: 1.5rem;
      box-shadow: 0 15px 30px rgba(15, 23, 42, 0.07);
    }
    .question-card h4 {
      color: #0f172a;
      font-weight: 600;
    }
    .video-card video {
      width: 100%;
      border-radius: 1rem;
      background: #0f172a;
    }
    .feedback-box {
      min-height: 180px;
      background: #0f172a;
      color: #e2e8f0;
      border-radius: 1rem;
      padding: 1rem;
      white-space: pre-wrap;
    }
    .transcript-box {
      min-height: 120px;
      background: #fff;
      border-radius: 0.75rem;
      border: 1px solid rgba(15, 23, 42, 0.08);
      padding: 0.75rem;
      white-space: pre-wrap;
    }
    .btn-pill {
      border-radius: 999px;
    }
  </style>
</head>
<body>
  <nav class="navbar navbar-light bg-white shadow-sm">
    <div class="container py-2">
      <a class="navbar-brand d-flex align-items-center" href="/">
        <span class="me-2">üß†</span>
        <strong>InterviewPrep AI</strong>
      </a>
      <span class="badge bg-primary-subtle text-primary">Gemini Powered</span>
    </div>
  </nav>

  <div class="container py-4">
    <div class="row g-4">
      <div class="col-lg-4">
        <div class="card p-3">
          <h5>Interview Setup</h5>
          <p class="text-muted small mb-3">Fill the form and start the interview.</p>
          <div class="mb-2">
            <label class="form-label">Name</label>
            <input id="candidateName" type="text" class="form-control" placeholder="Your name">
          </div>
          <div class="mb-2">
            <label class="form-label">Role Applied For</label>
            <input id="candidateRole" type="text" class="form-control" placeholder="Software Engineer, Analyst, ...">
          </div>
          <div class="mb-2">
            <label class="form-label">Experience Level</label>
            <select id="candidateExperience" class="form-select">
              <option>Fresher</option>
              <option>Intermediate</option>
              <option>Experienced</option>
            </select>
          </div>
          <div class="mb-2">
            <label class="form-label">Preferred Interview Style</label>
            <select id="candidateStyle" class="form-select">
              <option>General</option>
              <option>Behavioral</option>
              <option>Technical</option>
            </select>
          </div>
          <div class="mb-2">
            <label class="form-label">Job Description (optional)</label>
            <textarea id="jobDescription" class="form-control" rows="3" placeholder="Paste key points for tailoring questions..."></textarea>
          </div>
          <div class="mb-3">
            <label class="form-label">Resume Summary (optional)</label>
            <textarea id="resumeSummary" class="form-control" rows="3" placeholder="Paste relevant achievements or skills..."></textarea>
          </div>
          <button id="btnStartInterview" class="btn btn-primary w-100 btn-pill">
            üöÄ Start Interview
          </button>
          <div id="statusMessage" class="small text-muted mt-2"></div>
        </div>
      </div>

      <div class="col-lg-8">
        <div class="question-card mb-3">
          <div class="d-flex justify-content-between align-items-center mb-2">
            <span class="badge bg-primary-subtle text-primary">Current Question</span>
            <span id="questionCounter" class="text-muted">Q 0 / 0</span>
          </div>
          <h4 id="questionText">Fill the setup and click "Start Interview" to begin.</h4>
          <p id="questionMeta" class="text-muted mb-0 small"></p>
        </div>

        <div class="row g-3">
          <div class="col-md-6">
            <div class="card p-3 video-card">
              <div class="d-flex justify-content-between align-items-center mb-2">
                <h6 class="mb-0">Live Preview</h6>
                <span id="cameraStatus" class="badge bg-success-subtle text-success">Camera On</span>
              </div>
              <video id="interviewVideo" autoplay playsinline muted></video>
              <small class="text-muted d-block mt-2">Your video stays local‚Äîonly the transcript is sent for feedback.</small>
            </div>
          </div>
          <div class="col-md-6">
            <div class="card p-3">
              <div class="d-flex justify-content-between align-items-center mb-2">
                <h6 class="mb-0">AI Feedback</h6>
                <span id="ratingBadge" class="badge bg-secondary">Rating: ‚Äî</span>
              </div>
              <div id="feedbackBox" class="feedback-box">
After you answer, AI feedback will appear here.
              </div>
              <div class="mt-3">
                <div class="d-flex justify-content-between align-items-center">
                  <h6 class="mb-0">Live Transcript</h6>
                  <span id="recordingIndicator" class="badge bg-secondary">Idle</span>
                </div>
                <div id="transcriptBox" class="transcript-box mt-2">Press üé§ Start Recording to capture your answer.</div>
              </div>
            </div>
          </div>
        </div>

        <div class="card p-3 mt-3">
          <label class="form-label fw-semibold">Your Answer</label>
          <textarea id="answerBox" rows="4" class="form-control" placeholder="Speak or type your answer here..."></textarea>
          <small class="text-muted">Speech-to-text will auto-fill this box while you record.</small>
          <div class="d-flex flex-wrap gap-2 mt-3">
            <button id="btnRecord" class="btn btn-outline-primary btn-pill flex-grow-1">
              üé§ Start Recording
            </button>
            <button id="btnStopSend" class="btn btn-primary btn-pill flex-grow-1">
              ‚èπ Stop &amp; Send Answer
            </button>
            <button id="btnNextQuestion" class="btn btn-outline-secondary btn-pill flex-grow-1">
              ‚û° Next Question
            </button>
            <button id="btnSkipQuestion" class="btn btn-light border btn-pill flex-grow-1">
              ‚è≠ Skip
            </button>
          </div>
        </div>

        <div class="text-center mt-4">
          <button id="btnEndInterview" class="btn btn-danger btn-lg btn-pill px-5">
            üî¥ End Interview
          </button>
        </div>
      </div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script src="{{ url_for('static', filename='js/interview.js') }}"></script>
</body>
</html>

